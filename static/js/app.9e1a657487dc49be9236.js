webpackJsonp([1],{"5JIi":function(e,t){},"5gSR":function(e,t){},"6E0D":function(e,t){},"7/0V":function(e,t){},CeXJ:function(e,t){},EwCv:function(e,t){},NF9Q:function(e,t){},NHnr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=r("VCXJ"),a=r("MqOw"),s=r.n(a),n=r("2sCs"),p=r.n(n),i=r("S0kX"),l=r.n(i),c=r("zO6J"),d={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]},v=r("Mw9A")({name:"app"},d,!1,function(e){r("CeXJ")},"data-v-1e8f5084",null).exports,m=(r("7/0V"),r("vryz"),r("P1I3"),{data:function(){return{loading:!1,loginInfo:{user:"",password:"",verif:""},ruleInline:{user:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]}}},created:function(){},methods:{smLogin:function(e){var t=this;t.$refs[e].validate(function(e){if(e){var r={username:t.loginInfo.user,password:t.loginInfo.password};t.axios.post(t.baseJs.postUrl+"/login",r).then(function(e){var r=e.data;r.result?(sessionStorage.setItem("accessToken",!0),t.$router.push("/home")):t.$Message.error(r.data)})}else t.$Message.error("请完善表单！")})}}}),u={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"content-con login"},[r("div",{staticClass:"login-box"},[r("div",{staticClass:"login-logo"},[e._v("平台控制中心")]),e._v(" "),r("Form",{ref:"loginInfo",attrs:{model:e.loginInfo,rules:e.ruleInline}},[r("FormItem",{attrs:{prop:"user"}},[r("Input",{attrs:{type:"text",placeholder:"请输入用户名"},model:{value:e.loginInfo.user,callback:function(t){e.$set(e.loginInfo,"user",t)},expression:"loginInfo.user"}},[r("Icon",{attrs:{slot:"prepend",type:"android-person",size:"18"},slot:"prepend"})],1)],1),e._v(" "),r("FormItem",{attrs:{prop:"password"}},[r("Input",{attrs:{type:"password",placeholder:"请输入密码"},nativeOn:{keyup:function(t){if(!("button"in t)&&e._k(t.keyCode,"enter",13,t.key))return null;e.smLogin("loginInfo")}},model:{value:e.loginInfo.password,callback:function(t){e.$set(e.loginInfo,"password",t)},expression:"loginInfo.password"}},[r("Icon",{attrs:{slot:"prepend",type:"locked",size:"18"},slot:"prepend"})],1)],1),e._v(" "),r("FormItem",[r("Button",{attrs:{type:"primary",long:"",size:"large",loading:e.loading},on:{click:function(t){e.smLogin("loginInfo")}}},[e._v("登录")])],1)],1)],1)])},staticRenderFns:[]},b=r("Mw9A")(m,u,!1,function(e){r("fgKX")},"data-v-a567d744",null).exports,f={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"layout-wrap"},[t("sidebar",{staticClass:"layout-sidebar"}),this._v(" "),t("div",{staticClass:"layout-main"},[t("router-view")],1)],1)},staticRenderFns:[]},h=r("Mw9A")({created:function(){this.$store.dispatch("getPlatFormList"),this.$store.dispatch("getServerList"),this.$store.dispatch("getareaList")}},f,!1,function(e){r("gUCe")},"data-v-73040850",null).exports,P=r("3cXf"),g=r.n(P),_=r("a3Yh"),y=r.n(_),S=r("KPSb"),O=r.n(S),k={data:function(){var e=this;return{firstContIP:"",firstContID:null,opID:null,current:1,total:0,contCol:[{title:"控制器ID",key:"_id"},{title:"控制器名称",key:"name"},{title:"控制器类型",key:"contType"},{title:"控制器IP",key:"serverIp"},{title:"版本号",key:"version"},{title:"操作",key:"op",width:290,align:"center",render:function(t,r){var o=e;return t("div",[t("Button",{props:{type:"ghost",size:"small",icon:"refresh"},style:{marginRight:"5px"},on:{click:function(){sessionStorage.setItem("controlID",r.row.id),sessionStorage.setItem("controlIP",r.row.controlIP),o.$router.push("/controllerDetManage")}}},"管理"),t("Button",{props:{type:"ghost",size:"small",icon:"refresh",disabled:1==r.row.id},style:{marginRight:"5px"},on:{click:function(){o.updateCont(r.row)}}},"更新"),t("Button",{props:{disabled:1==r.row.id,type:"error",size:"small",icon:"trash-a"},on:{click:function(){o.opID=r.row.id,o.$Modal.confirm({title:"谨慎操作",content:"<p>确定删除么？</p>",onOk:function(){o.delCont(r.row)}})}}},"删除")])}}],contList:[],aeContRule:{name:this.baseJs.textRule},aeContProp:{show:!1,btnLoad:!1,isEdit:!1,controlTypeList:[],versionList:[],version:"",serverList:[],serverIP:"",controlIP:"",propObj:{cid:"",name:"",controlTypeId:null,accountName:"",psw:"",privatekey:"",versionId:null,serverIP:null,masterAddr:"",redisAddr:"",redisPwd:"",scryptUrl:"http://git.sogame.co/zhangyuge/downloads/raw/master/controller_scrypt"}},wsUrl:""}},created:function(){this.getContList()},methods:{getContList:function(){var e=this;e.axios.get(e.baseJs.postUrl+"/controllers/ls").then(function(t){var r=t.data;if(r.result){var o=[];(r.data||[]).forEach(function(e){var t;o.push((t={_id:e._id,name:e.name},y()(t,"name",e.name),y()(t,"contType",e.controller_type?e.controller_type.name:""),y()(t,"serverIp",e.serverIp),y()(t,"version",e.version?e.version.name:""),t))}),e.contList=o}else e.$Message.error(r.data)})},openAeContForm:function(e,t){this.$refs.aeContForm.resetFields(),"edit"==e?(this.aeContProp.isEdit=!0,this.aeContProp.propObj.name=t.name,this.aeContProp.propObj.controlIP=t.controlIP,this.aeContProp.propObj.accountName=t.accountName,this.aeContProp.propObj.psw=t.psw,this.aeContProp.propObj.privatekey=t.privatekey,this.aeContProp.propObj.controlTypeId=t.controlTypeId,this.aeContProp.propObj.versionId=t.versionId):this.aeContProp.isEdit=!1,this.aeContProp.show=!0},smAeController:function(){var e=this;e.$refs.aeContForm.validate(function(t){if(t){e.aeContProp.btnLoad=!0,e.$Spin.show();var r=O()(e.baseJs.uuid()),o=e.baseJs.masterIP;e.aeContProp.propObj.cid=r,e.aeContProp.propObj.masterAddr=o;var a=e.baseJs.copyObj(e.aeContProp.propObj);a.controlIP=e.aeContProp.controlIP,a.version=e.aeContProp.version;var s=new WebSocket(e.wsUrl);s.onopen=function(){s.send(e.wsSendData(a,207))},s.onmessage=function(t){var r=JSON.parse(t.data);if("207"==r.code)if(r.data.indexOf("大吉大利")>-1){var o=e.baseJs.copyObj(e.aeContProp.propObj);e.axios.post(e.baseJs.postUrl+"/control/add",o).then(function(t){var r=t.data;r.result?(e.$Spin.hide(),e.aeContProp.btnLoad=!1,e.aeContProp.show=!1,e.$Message.success("操作成功！"),e.getContList(e,e.current)):(e.aeContProp.btnLoad=!1,e.$Message.error(r.msg))}),s.close()}else e.$Spin.hide(),e.aeContProp.btnLoad=!1,e.$Message.error("操作失败，请重试！"),s.close()}}else e.$Message.error("请完善表单")})},wsSendData:function(e,t){return g()({code:t,robotId:"",data:{targetAddr:e.controlIP,privateKey:e.privatekey,rootUsr:e.accountName,rootPwd:e.psw,Servers:{masterAddr:this.baseJs.masterIP,version:e.version,redisAddr:e.redisAddr,redisPwd:e.redisPwd,controllerId:e.cid,scryptUrl:e.scryptUrl}}})},delCont:function(e){var t=this;t.$Spin.show();var r=new WebSocket(t.wsUrl);r.onopen=function(){r.send(t.wsSendData(e,209))},r.onmessage=function(e){var o=JSON.parse(e.data);if("209"==o.code){var a={id:t.opID};o.data.indexOf("大吉大利")>-1?(t.axios.post(t.baseJs.postUrl+"/control/delete",a).then(function(e){var r=e.data;r.result?(t.$Spin.hide(),t.$Modal.remove(),t.$Message.success("操作成功！"),t.getContList(t,t.current)):(t.$Spin.hide(),t.$Modal.remove(),t.$Message.error(r.msg))}),r.close()):(t.axios.post(t.baseJs.postUrl+"/control/delete",a).then(function(e){var r=e.data;r.result?(t.$Spin.hide(),t.$Modal.remove(),t.$Message.success("操作成功！"),t.getContList(t,t.current)):(t.$Spin.hide(),t.$Modal.remove(),t.$Message.error(r.msg))}),r.close())}}},pageGo:function(e){},updateCont:function(e){var t=this;t.$Spin.show();var r=new WebSocket(t.wsUrl);r.onopen=function(){r.send(t.wsSendData(e,208))},r.onmessage=function(e){var o=JSON.parse(e.data);"208"==o.code&&(o.data.indexOf("大吉大利")>-1?(t.$Message.success("更新成功！"),t.$Spin.hide(),r.close()):(t.$Message.error("更新失败！"),t.$Spin.hide(),r.close()))}},contIPChange:function(e){var t=this;t.aeContProp.controlIP=e.label,t.aeContProp.serverList.forEach(function(r,o){r.id==e.value&&(t.aeContProp.propObj.privatekey=r.privatekey,t.aeContProp.propObj.accountName=r.accountName,t.aeContProp.propObj.psw=r.psw)})},versionChange:function(e){this.aeContProp.version=e.label}}},I={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-wrap"},[r("div",{staticClass:"main-box"},[r("div",{staticClass:"con-body"},[r("div",{staticClass:"table-body"},[r("Table",{attrs:{columns:e.contCol,data:e.contList}})],1),e._v(" "),r("div",{staticClass:"table-footer"},[r("Row",[r("Col",{attrs:{span:"8"}},[r("Button",{attrs:{type:"primary"},on:{click:e.openAeContForm}},[e._v("创建控制器")])],1),e._v(" "),r("Col",{staticStyle:{"text-align":"right"},attrs:{span:"16"}},[r("Page",{attrs:{total:e.total,current:e.current},on:{"on-change":e.pageGo}})],1)],1)],1)])]),e._v(" "),r("Modal",{attrs:{title:"创建/编辑控制器",width:400,"mask-closable":!1},model:{value:e.aeContProp.show,callback:function(t){e.$set(e.aeContProp,"show",t)},expression:"aeContProp.show"}},[r("Form",{ref:"aeContForm",attrs:{model:e.aeContProp.propObj,rules:e.aeContRule,"label-width":100}},[r("FormItem",{attrs:{prop:"name",label:"控制器名称"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeContProp.propObj.name,callback:function(t){e.$set(e.aeContProp.propObj,"name",t)},expression:"aeContProp.propObj.name"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"serverIP",label:"控制器IP"}},[r("Select",{attrs:{"label-in-value":!0},on:{"on-change":e.contIPChange},model:{value:e.aeContProp.propObj.serverIP,callback:function(t){e.$set(e.aeContProp.propObj,"serverIP",t)},expression:"aeContProp.propObj.serverIP"}},e._l(e.$store.state.serverList,function(t,o){return r("Option",{key:o,attrs:{value:t._id}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("FormItem",{attrs:{prop:"controlTypeId",label:"控制器类型"}},[r("Select",{model:{value:e.aeContProp.propObj.controlTypeId,callback:function(t){e.$set(e.aeContProp.propObj,"controlTypeId",t)},expression:"aeContProp.propObj.controlTypeId"}},e._l(e.$store.state.contTypeList,function(t,o){return r("Option",{key:o,attrs:{value:t._id}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("FormItem",{attrs:{prop:"versionId",label:"版本号"}},[r("Select",{attrs:{"label-in-value":!0},on:{"on-change":e.versionChange},model:{value:e.aeContProp.propObj.versionId,callback:function(t){e.$set(e.aeContProp.propObj,"versionId",t)},expression:"aeContProp.propObj.versionId"}},e._l(e.$store.state.versionList,function(t,o){return r("Option",{key:o,attrs:{value:t._id}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("FormItem",{attrs:{prop:"redisAddr",label:"redis地址"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeContProp.propObj.redisAddr,callback:function(t){e.$set(e.aeContProp.propObj,"redisAddr",t)},expression:"aeContProp.propObj.redisAddr"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"redisPwd",label:"redis密码"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeContProp.propObj.redisPwd,callback:function(t){e.$set(e.aeContProp.propObj,"redisPwd",t)},expression:"aeContProp.propObj.redisPwd"}})],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary",loading:e.aeContProp.btnLoad},on:{click:e.smAeController}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},x=r("Mw9A")(k,I,!1,function(e){r("NF9Q")},"data-v-71f59298",null).exports,w={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-wrap"},[r("div",{staticClass:"main-box"},[r("div",{staticClass:"con-body"},[r("div",{staticClass:"table-body"},[r("Table",{attrs:{columns:e.contCol,data:e.contList}})],1),e._v(" "),r("div",{staticClass:"table-footer"},[r("Row",[r("Col",{attrs:{span:"4"}},[r("Button",{attrs:{type:"primary"},on:{click:e.openAeAreaForm}},[e._v("添加地区")])],1)],1)],1)])]),e._v(" "),r("Modal",{attrs:{title:e.aeAreaProp.isEdit?"编辑控制器类型":"创建控制器类型",width:400,"mask-closable":!1},model:{value:e.aeAreaProp.show,callback:function(t){e.$set(e.aeAreaProp,"show",t)},expression:"aeAreaProp.show"}},[r("Form",{ref:"aeAreaForm",attrs:{model:e.aeAreaProp.propObj,rules:e.aeAreaRule,"label-width":110}},[r("FormItem",{attrs:{prop:"name",label:"地区名称"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeAreaProp.propObj.name,callback:function(t){e.$set(e.aeAreaProp.propObj,"name",t)},expression:"aeAreaProp.propObj.name"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"cdnId",label:"cdnId"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeAreaProp.propObj.cdnId,callback:function(t){e.$set(e.aeAreaProp.propObj,"cdnId",t)},expression:"aeAreaProp.propObj.cdnId"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"cdnServer",label:"cdnServer"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeAreaProp.propObj.cdnServer,callback:function(t){e.$set(e.aeAreaProp.propObj,"cdnServer",t)},expression:"aeAreaProp.propObj.cdnServer"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"cdnCode",label:"cdnCode"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeAreaProp.propObj.cdnCode,callback:function(t){e.$set(e.aeAreaProp.propObj,"cdnCode",t)},expression:"aeAreaProp.propObj.cdnCode"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"cdnKey",label:"cdnKey"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeAreaProp.propObj.cdnKey,callback:function(t){e.$set(e.aeAreaProp.propObj,"cdnKey",t)},expression:"aeAreaProp.propObj.cdnKey"}})],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary",loading:e.aeAreaProp.btnLoad},on:{click:e.smAeArea}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},j=r("Mw9A")({data:function(){var e=this;return{opID:null,total:null,current:1,contCol:[{title:"地区名称",key:"name"},{title:"CDNserver",key:"cdnServer"},{title:"CDNid",key:"cdnId"},{title:"CDNcode",key:"cdnCode"},{title:"CDNkey",key:"cdnKey"},{title:"操作",key:"op",width:170,align:"center",render:function(t,r){var o=e;return t("div",[t("Button",{props:{type:"ghost",size:"small",icon:"edit"},style:{marginRight:"5px"},on:{click:function(){o.opID=r.row._id,o.openAeAreaForm("edit",r.row)}}},"编辑"),t("Button",{props:{disabled:1==r.row.status,type:"error",size:"small",icon:"trash-a"},on:{click:function(){o.opID=r.row._id,o.$Modal.confirm({title:"谨慎操作",content:"<p>确定删除么？</p>",loading:!0,onOk:function(){o.delArea(o.opID)}})}}},"删除")])}}],contList:[],aeAreaRule:{name:this.baseJs.textRule},aeAreaProp:{show:!1,btnLoad:!1,isEdit:!1,cdnList:[],propObj:{name:"",cdnId:"",cdnServer:"",cdnCode:"",cdnKey:""}}}},created:function(){this.getAreaList()},methods:{getAreaList:function(){var e=this;e.axios.get(e.baseJs.getUrl+"/areas/ls").then(function(t){var r=t.data;if(r.result){var o=r.data||[];e.contList=o,e.$store.commit("setState",{name:"areaList",data:o})}else e.$Message.error(r.data)})},openAeAreaForm:function(e,t){this.$refs.aeAreaForm.resetFields(),"edit"==e?(this.aeAreaProp.isEdit=!0,this.aeAreaProp.propObj.name=t.name,this.aeAreaProp.propObj.cdnId=t.cdnId,this.aeAreaProp.propObj.cdnServer=t.cdnServer,this.aeAreaProp.propObj.cdnCode=t.cdnCode,this.aeAreaProp.propObj.cdnKey=t.cdnKey):this.aeAreaProp.isEdit=!1,this.aeAreaProp.show=!0},smAeArea:function(){var e=this;e.$refs.aeAreaForm.validate(function(t){if(t){e.aeAreaProp.btnLoad=!0;var r="",o=e.baseJs.copyObj(e.aeAreaProp.propObj);e.aeAreaProp.isEdit?(o._id=e.opID,r="/areas/update"):r="/areas/create",e.axios.post(""+e.baseJs.postUrl+r,o).then(function(t){var r=t.data;r.result?(e.aeAreaProp.btnLoad=!1,e.aeAreaProp.show=!1,e.$Message.success("操作成功！"),e.getAreaList()):(e.aeAreaProp.btnLoad=!1,e.$Message.error(r.data))})}else e.$Message.error("请完善表单")})},delArea:function(e){var t=this,r={_id:e};t.axios.post(t.baseJs.postUrl+"/areas/delete",r).then(function(e){var r=e.data;r.result?(t.$Modal.remove(),t.$Message.success("操作成功！"),t.getAreaList()):(t.$Modal.remove(),t.$Message.error(r.data))})}}},w,!1,function(e){r("oO6p")},"data-v-cc70101a",null).exports,C={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[r("div",{staticClass:"table-box"},[r("Table",{attrs:{columns:e.serverCol,data:e.serverList}})],1),e._v(" "),r("div",{staticClass:"table-footer"},[r("Row",[r("Col",{attrs:{span:"24"}},[r("Button",{attrs:{type:"primary"},on:{click:e.openAeServerForm}},[e._v("添加服务器")])],1)],1)],1),e._v(" "),r("Modal",{attrs:{title:e.aeServerProp.isEdit?"编辑服务器":"创建服务器",width:400,"mask-closable":!1},model:{value:e.aeServerProp.show,callback:function(t){e.$set(e.aeServerProp,"show",t)},expression:"aeServerProp.show"}},[r("Form",{ref:"aeServerForm",attrs:{model:e.aeServerProp.propObj,rules:e.aeServerRule,"label-width":100}},[r("FormItem",{attrs:{prop:"name",label:"服务器名"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.name,callback:function(t){e.$set(e.aeServerProp.propObj,"name",t)},expression:"aeServerProp.propObj.name"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"ip",label:"服务器IP"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.ip,callback:function(t){e.$set(e.aeServerProp.propObj,"ip",t)},expression:"aeServerProp.propObj.ip"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"rootUsr",label:"登录账号"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.rootUsr,callback:function(t){e.$set(e.aeServerProp.propObj,"rootUsr",t)},expression:"aeServerProp.propObj.rootUsr"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"rootPwd",label:"登录密码"}},[r("Input",{attrs:{type:"password",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.rootPwd,callback:function(t){e.$set(e.aeServerProp.propObj,"rootPwd",t)},expression:"aeServerProp.propObj.rootPwd"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"privateKey",label:"登录私钥"}},[r("Input",{attrs:{type:"textarea",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.privateKey,callback:function(t){e.$set(e.aeServerProp.propObj,"privateKey",t)},expression:"aeServerProp.propObj.privateKey"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"area",label:"服务器地区"}},[r("Select",{model:{value:e.aeServerProp.propObj.area,callback:function(t){e.$set(e.aeServerProp.propObj,"area",t)},expression:"aeServerProp.propObj.area"}},e._l(e.areaList,function(t){return r("Option",{key:t._id,attrs:{value:t.name}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("FormItem",{attrs:{prop:"type",label:"服务器类型"}},[r("RadioGroup",{model:{value:e.aeServerProp.propObj.type,callback:function(t){e.$set(e.aeServerProp.propObj,"type",t)},expression:"aeServerProp.propObj.type"}},[r("Radio",{attrs:{label:"robot"}},[e._v("终端服务器")]),e._v(" "),r("Radio",{attrs:{label:"controller"}},[e._v("控制器服务器")]),e._v(" "),r("Radio",{attrs:{label:"gameapi"}},[e._v("游戏API")])],1)],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary",loading:e.aeServerProp.btnLoad},on:{click:e.smAeServer}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},$=r("Mw9A")({name:"name",data:function(){var e=this;return{opID:null,serverCol:[{title:"ID",key:"_id"},{title:"服务器名称",key:"name"},{title:"所在地区",key:"area"},{title:"服务器IP",key:"ip"},{title:"服务器类型",key:"",align:"center",render:function(e,t){var r="";switch(t.row.type){case"robot":r="终端";break;case"controller":r="控制器";break;case"gameapi":r="游戏API";break;default:r=t.row.type}return e("div",{},r)}},{title:"操作",key:"op",width:180,align:"center",render:function(t,r){var o=e;return t("div",[t("Button",{props:{type:"ghost",size:"small",icon:"edit"},style:{marginRight:"5px"},on:{click:function(){o.opID=r.row._id,o.openAeServerForm("edit",r.row)}}},"编辑"),t("Button",{props:{type:"error",size:"small",icon:"trash-a"},on:{click:function(){o.opID=r.row._id,o.$Modal.confirm({title:"谨慎操作",content:"<p>确定删除么？</p>",loading:!0,onOk:function(){o.delServer(o.opID)}})}}},"删除")])}}],aeServerProp:{show:!1,btnLoad:!1,isEdit:!1,propObj:{type:"",ip:"",name:"",area:"",rootUsr:"",rootPwd:"",privateKey:"",installed:!1}},aeServerRule:{name:this.baseJs.textRule,ip:this.baseJs.textRule,rootUsr:this.baseJs.textRule,area:this.baseJs.textRule}}},computed:{serverList:function(){return this.$store.state.serverList},areaList:function(){return this.$store.state.areaList}},created:function(){},methods:{openAeServerForm:function(e,t){this.$refs.aeServerForm.resetFields(),"edit"==e?(this.aeServerProp.isEdit=!0,this.aeServerProp.propObj.name=t.name,this.aeServerProp.propObj.ip=t.ip,this.aeServerProp.propObj.rootUsr=t.rootUsr,this.aeServerProp.propObj.rootPwd=t.rootPwd,this.aeServerProp.propObj.privateKey=t.privateKey,this.aeServerProp.propObj.type=t.type,this.aeServerProp.propObj.area=t.area):this.aeServerProp.isEdit=!1,this.aeServerProp.show=!0},smAeServer:function(){var e=this;e.$refs.aeServerForm.validate(function(t){if(t){e.aeServerProp.btnLoad=!0;var r="",o=e.baseJs.copyObj(e.aeServerProp.propObj);e.aeServerProp.isEdit?(o._id=e.opID,r="/servers/update"):r="/servers/create",e.axios.post(""+e.baseJs.postUrl+r,o).then(function(t){var r=t.data;r.result?(e.aeServerProp.btnLoad=!1,e.aeServerProp.show=!1,e.$Message.success("操作成功！"),e.$store.dispatch("getServerList")):(e.aeServerProp.btnLoad=!1,e.$Message.error(r.msg))})}else e.$Message.error("请完善表单")})},delServer:function(e){var t=this,r={_id:e};t.axios.post(t.baseJs.postUrl+"/servers/delete",r).then(function(e){var r=e.data;r.result?(t.$Modal.remove(),t.$Message.success("操作成功！"),t.$store.dispatch("getServerList")):(t.$Modal.remove(),t.$Message.error(r.data))})}}},C,!1,function(e){r("vfEN")},"data-v-909dbaba",null).exports,L={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.loading?r("Spin",{attrs:{fix:""}}):e._e(),e._v(" "),r("div",{staticClass:"table-box"},[r("Table",{attrs:{columns:e.serverCol,data:e.contServerList}})],1),e._v(" "),r("div",{staticClass:"table-footer"},[r("Row",[r("Col",{attrs:{span:"24"}},[r("Button",{attrs:{type:"primary"},on:{click:e.openAeServerForm}},[e._v("添加服务器")])],1)],1)],1),e._v(" "),r("Modal",{attrs:{title:e.aeServerProp.isEdit?"编辑服务器":"创建服务器",width:400,"mask-closable":!1},model:{value:e.aeServerProp.show,callback:function(t){e.$set(e.aeServerProp,"show",t)},expression:"aeServerProp.show"}},[r("Form",{ref:"aeServerForm",attrs:{model:e.aeServerProp.propObj,rules:e.aeServerRule,"label-width":100}},[r("FormItem",{attrs:{prop:"name",label:"服务器名"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.name,callback:function(t){e.$set(e.aeServerProp.propObj,"name",t)},expression:"aeServerProp.propObj.name"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"ip",label:"服务器IP"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.ip,callback:function(t){e.$set(e.aeServerProp.propObj,"ip",t)},expression:"aeServerProp.propObj.ip"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"rootUsr",label:"登录账号"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.rootUsr,callback:function(t){e.$set(e.aeServerProp.propObj,"rootUsr",t)},expression:"aeServerProp.propObj.rootUsr"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"rootPwd",label:"登录密码"}},[r("Input",{attrs:{type:"password",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.rootPwd,callback:function(t){e.$set(e.aeServerProp.propObj,"rootPwd",t)},expression:"aeServerProp.propObj.rootPwd"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"privateKey",label:"登录私钥"}},[r("Input",{attrs:{type:"textarea",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.privateKey,callback:function(t){e.$set(e.aeServerProp.propObj,"privateKey",t)},expression:"aeServerProp.propObj.privateKey"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"area",label:"服务器地区"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.area,callback:function(t){e.$set(e.aeServerProp.propObj,"area",t)},expression:"aeServerProp.propObj.area"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"type",label:"服务器类型"}},[r("RadioGroup",{model:{value:e.aeServerProp.propObj.type,callback:function(t){e.$set(e.aeServerProp.propObj,"type",t)},expression:"aeServerProp.propObj.type"}},[r("Radio",{attrs:{label:"robot"}},[e._v("终端服务器")]),e._v(" "),r("Radio",{attrs:{label:"controller"}},[e._v("控制器服务器")]),e._v(" "),r("Radio",{attrs:{label:"gameapi"}},[e._v("游戏API")])],1)],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary",loading:e.aeServerProp.btnLoad},on:{click:e.smAeServer}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},A={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.loading?r("Spin",{attrs:{fix:""}}):e._e(),e._v(" "),r("div",{staticClass:"table-box"},[r("Table",{attrs:{columns:e.serverCol,data:e.robotList}})],1),e._v(" "),r("div",{staticClass:"table-footer"},[r("Row",[r("Col",{attrs:{span:"24"}},[r("Button",{attrs:{type:"primary"},on:{click:e.openAeServerForm}},[e._v("添加服务器")])],1)],1)],1),e._v(" "),r("Modal",{attrs:{title:e.aeServerProp.isEdit?"编辑服务器":"创建服务器",width:400,"mask-closable":!1},model:{value:e.aeServerProp.show,callback:function(t){e.$set(e.aeServerProp,"show",t)},expression:"aeServerProp.show"}},[r("Form",{ref:"aeServerForm",attrs:{model:e.aeServerProp.propObj,rules:e.aeServerRule,"label-width":100}},[r("FormItem",{attrs:{prop:"name",label:"服务器名"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.name,callback:function(t){e.$set(e.aeServerProp.propObj,"name",t)},expression:"aeServerProp.propObj.name"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"ip",label:"服务器IP"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.ip,callback:function(t){e.$set(e.aeServerProp.propObj,"ip",t)},expression:"aeServerProp.propObj.ip"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"rootUsr",label:"登录账号"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.rootUsr,callback:function(t){e.$set(e.aeServerProp.propObj,"rootUsr",t)},expression:"aeServerProp.propObj.rootUsr"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"rootPwd",label:"登录密码"}},[r("Input",{attrs:{type:"password",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.rootPwd,callback:function(t){e.$set(e.aeServerProp.propObj,"rootPwd",t)},expression:"aeServerProp.propObj.rootPwd"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"privateKey",label:"登录私钥"}},[r("Input",{attrs:{type:"textarea",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.privateKey,callback:function(t){e.$set(e.aeServerProp.propObj,"privateKey",t)},expression:"aeServerProp.propObj.privateKey"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"area",label:"服务器地区"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.area,callback:function(t){e.$set(e.aeServerProp.propObj,"area",t)},expression:"aeServerProp.propObj.area"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"type",label:"服务器类型"}},[r("RadioGroup",{model:{value:e.aeServerProp.propObj.type,callback:function(t){e.$set(e.aeServerProp.propObj,"type",t)},expression:"aeServerProp.propObj.type"}},[r("Radio",{attrs:{label:"robot"}},[e._v("终端服务器")]),e._v(" "),r("Radio",{attrs:{label:"controller"}},[e._v("控制器服务器")]),e._v(" "),r("Radio",{attrs:{label:"gameapi"}},[e._v("游戏API")])],1)],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary",loading:e.aeServerProp.btnLoad},on:{click:e.smAeServer}},[e._v("提交")])],1)],1),e._v(" "),r("Modal",{attrs:{title:"安装终端",width:400,"mask-closable":!1},model:{value:e.aeTermProp.show,callback:function(t){e.$set(e.aeTermProp,"show",t)},expression:"aeTermProp.show"}},[r("Form",{ref:"aeTermForm",attrs:{model:e.aeTermProp.propObj,rules:e.aeTermRule,"label-width":100}},[r("FormItem",{attrs:{prop:"robotName",label:"终端名"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeTermProp.propObj.robotName,callback:function(t){e.$set(e.aeTermProp.propObj,"robotName",t)},expression:"aeTermProp.propObj.robotName"}})],1),e._v(" "),e.aeTermProp.isEdit?e._e():r("div",[r("FormItem",{attrs:{prop:"count",label:"安装个数"}},[r("InputNumber",{staticStyle:{width:"100%"},attrs:{min:1,max:30},model:{value:e.aeTermProp.propObj.count,callback:function(t){e.$set(e.aeTermProp.propObj,"count",t)},expression:"aeTermProp.propObj.count"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"serverId",label:"服务器"}},[r("Select",{attrs:{disabled:""},model:{value:e.aeTermProp.propObj.serverId,callback:function(t){e.$set(e.aeTermProp.propObj,"serverId",t)},expression:"aeTermProp.propObj.serverId"}},e._l(e.serverList,function(t,o){return r("Option",{key:o,attrs:{value:t._id}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("FormItem",{attrs:{prop:"stype",label:"终端类型"}},[r("RadioGroup",{model:{value:e.aeTermProp.propObj.stype,callback:function(t){e.$set(e.aeTermProp.propObj,"stype",t)},expression:"aeTermProp.propObj.stype"}},[r("Radio",{attrs:{label:"WX"}},[e._v("微信")]),e._v(" "),r("Radio",{attrs:{label:"QQ"}},[e._v("QQ")])],1)],1)],1),e._v(" "),r("FormItem",{attrs:{prop:"platformId",label:"平台选择"}},[r("Select",{model:{value:e.aeTermProp.propObj.platformId,callback:function(t){e.$set(e.aeTermProp.propObj,"platformId",t)},expression:"aeTermProp.propObj.platformId"}},e._l(e.platformList,function(t,o){return r("Option",{key:o,attrs:{value:t._id}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("FormItem",{attrs:{prop:"sock5On",label:"SOCK5"}},[r("RadioGroup",{model:{value:e.aeTermProp.propObj.sock5On,callback:function(t){e.$set(e.aeTermProp.propObj,"sock5On",t)},expression:"aeTermProp.propObj.sock5On"}},[r("Radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),r("Radio",{attrs:{label:0}},[e._v("关闭")])],1)],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary",loading:e.aeTermProp.btnLoad},on:{click:e.smAeTerm}},[e._v("确定")])],1)],1),e._v(" "),r("Modal",{attrs:{title:"更新终端",width:400,"mask-closable":!1},model:{value:e.updateTermProp.show,callback:function(t){e.$set(e.updateTermProp,"show",t)},expression:"updateTermProp.show"}},[r("Form",{attrs:{model:e.updateTermProp,"label-width":100}},[r("FormItem",{attrs:{prop:"stype",label:"终端类型"}},[r("RadioGroup",{model:{value:e.updateTermProp.stype,callback:function(t){e.$set(e.updateTermProp,"stype",t)},expression:"updateTermProp.stype"}},[r("Radio",{attrs:{label:"WX"}},[e._v("微信")]),e._v(" "),r("Radio",{attrs:{label:"QQ"}},[e._v("QQ")])],1)],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary",loading:e.updateTermProp.btnLoad},on:{click:e.updateTerm}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]},M={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",[e.loading?r("Spin",{attrs:{fix:""}}):e._e(),e._v(" "),r("div",{staticClass:"table-box"},[r("Table",{attrs:{columns:e.serverCol,data:e.gameList}})],1),e._v(" "),r("div",{staticClass:"table-footer"},[r("Row",[r("Col",{attrs:{span:"24"}},[r("Button",{attrs:{type:"primary"},on:{click:e.openAeServerForm}},[e._v("添加服务器")])],1)],1)],1),e._v(" "),r("Modal",{attrs:{title:e.aeServerProp.isEdit?"编辑服务器":"创建服务器",width:400,"mask-closable":!1},model:{value:e.aeServerProp.show,callback:function(t){e.$set(e.aeServerProp,"show",t)},expression:"aeServerProp.show"}},[r("Form",{ref:"aeServerForm",attrs:{model:e.aeServerProp.propObj,rules:e.aeServerRule,"label-width":100}},[r("FormItem",{attrs:{prop:"name",label:"服务器名"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.name,callback:function(t){e.$set(e.aeServerProp.propObj,"name",t)},expression:"aeServerProp.propObj.name"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"ip",label:"服务器IP"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.ip,callback:function(t){e.$set(e.aeServerProp.propObj,"ip",t)},expression:"aeServerProp.propObj.ip"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"rootUsr",label:"登录账号"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.rootUsr,callback:function(t){e.$set(e.aeServerProp.propObj,"rootUsr",t)},expression:"aeServerProp.propObj.rootUsr"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"rootPwd",label:"登录密码"}},[r("Input",{attrs:{type:"password",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.rootPwd,callback:function(t){e.$set(e.aeServerProp.propObj,"rootPwd",t)},expression:"aeServerProp.propObj.rootPwd"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"privateKey",label:"登录私钥"}},[r("Input",{attrs:{type:"textarea",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.privateKey,callback:function(t){e.$set(e.aeServerProp.propObj,"privateKey",t)},expression:"aeServerProp.propObj.privateKey"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"area",label:"服务器地区"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeServerProp.propObj.area,callback:function(t){e.$set(e.aeServerProp.propObj,"area",t)},expression:"aeServerProp.propObj.area"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"type",label:"服务器类型"}},[r("RadioGroup",{model:{value:e.aeServerProp.propObj.type,callback:function(t){e.$set(e.aeServerProp.propObj,"type",t)},expression:"aeServerProp.propObj.type"}},[r("Radio",{attrs:{label:"robot"}},[e._v("终端服务器")]),e._v(" "),r("Radio",{attrs:{label:"controller"}},[e._v("控制器服务器")]),e._v(" "),r("Radio",{attrs:{label:"gameapi"}},[e._v("游戏API")])],1)],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary",loading:e.aeServerProp.btnLoad},on:{click:e.smAeServer}},[e._v("提交")])],1)],1)],1)},staticRenderFns:[]},T={components:{serverList:$,controllerList:r("Mw9A")({name:"name",data:function(){var e=this;return{opID:null,loading:!1,serverCol:[{title:"ID",key:"_id"},{title:"服务器名称",key:"name"},{title:"地区",key:"area"},{title:"服务器IP",key:"ip"},{title:"操作",key:"op",width:230,align:"center",render:function(t,r){var o=e;return t("div",[t("Button",{props:{type:"ghost",size:"small"},style:{margin:"5px 5px 0 0"},on:{click:function(){o.installController(r.row._id)}}},"终端控制器"),t("Button",{props:{type:"ghost",size:"small"},style:{margin:"5px 5px 0 0"},on:{click:function(){o.installController(r.row._id,"interface")}}},"平台控制器"),t("a",{attrs:{target:"_blank",class:"ivu-btn ivu-btn-ghost ivu-btn-small",href:"http://"+r.row.ip+":7001/logs/"},style:{margin:"5px 5px 5px 0"}},"7001"),t("a",{attrs:{target:"_blank",class:"ivu-btn ivu-btn-ghost ivu-btn-small",href:"http://"+r.row.ip+":7101/logs/"},style:{margin:"5px 5px 5px 0"}},"7101"),t("Button",{props:{type:"ghost",size:"small"},style:{margin:"5px 5px 5px 0"},on:{click:function(){o.opID=r.row._id,o.openAeServerForm("edit",r.row)}}},"编辑"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){o.opID=r.row._id,o.$Modal.confirm({title:"谨慎操作",content:"<p>确定删除么？</p>",loading:!0,onOk:function(){o.delServer(o.opID)}})}}},"删除")])}}],aeServerProp:{show:!1,btnLoad:!1,isEdit:!1,propObj:{type:"",ip:"",name:"",area:"",rootUsr:"",rootPwd:"",privateKey:"",installed:!1}},aeServerRule:{name:this.baseJs.textRule,ip:this.baseJs.textRule,rootUsr:this.baseJs.textRule,area:this.baseJs.textRule}}},computed:{contServerList:function(){return this.serverList.filter(function(e){return"controller"==e.type})},serverList:function(){return this.$store.state.serverList}},methods:{openAeServerForm:function(e,t){this.$refs.aeServerForm.resetFields(),"edit"==e?(this.aeServerProp.isEdit=!0,this.aeServerProp.propObj.name=t.name,this.aeServerProp.propObj.ip=t.ip,this.aeServerProp.propObj.rootUsr=t.rootUsr,this.aeServerProp.propObj.rootPwd=t.rootPwd,this.aeServerProp.propObj.privateKey=t.privateKey,this.aeServerProp.propObj.type=t.type,this.aeServerProp.propObj.area=t.area):this.aeServerProp.isEdit=!1,this.aeServerProp.show=!0},smAeServer:function(){var e=this;e.$refs.aeServerForm.validate(function(t){if(t){e.aeServerProp.btnLoad=!0;var r="",o=e.baseJs.copyObj(e.aeServerProp.propObj);e.aeServerProp.isEdit?(o._id=e.opID,r="/servers/update"):r="/servers/create",e.axios.post(""+e.baseJs.postUrl+r,o).then(function(t){var r=t.data;r.result?(e.aeServerProp.btnLoad=!1,e.aeServerProp.show=!1,e.$Message.success("操作成功！"),e.$store.dispatch("getServerList")):(e.aeServerProp.btnLoad=!1,e.$Message.error(r.msg))})}else e.$Message.error("请完善表单")})},delServer:function(e){var t=this,r={_id:e};t.axios.post(t.baseJs.postUrl+"/servers/delete",r).then(function(e){var r=e.data;r.result?(t.$Modal.remove(),t.$Message.success("操作成功！"),t.$store.dispatch("getServerList")):(t.$Modal.remove(),t.$Message.error(r.data))})},installController:function(e,t){var r=this;r.loading=!0;var o="",a={serverId:e};o=t?"/remote/interface/setup":"/remote/controller/setup",r.axios.post(""+r.baseJs.postUrl+o,a).then(function(e){var t=e.data;t.result?(r.loading=!1,r.$Message.success("安装成功!")):(r.loading=!1,r.$Message.error(t.data))})}}},L,!1,function(e){r("wBDP")},"data-v-67e92cf2",null).exports,termList:r("Mw9A")({name:"name",data:function(){var e=this;return{opID:null,loading:!1,serverCol:[{title:"ID",key:"_id"},{title:"服务器名称",key:"name"},{title:"地区",key:"area"},{title:"服务器IP",key:"ip"},{title:"操作",key:"op",width:300,align:"center",render:function(t,r){var o=e;return t("div",[t("Button",{props:{type:"ghost",size:"small"},style:{marginRight:"5px"},on:{click:function(){o.openAeTerm("add",r.row)}}},"安装终端"),t("Button",{props:{type:"ghost",size:"small"},style:{marginRight:"5px"},on:{click:function(){o.updateTermProp.serverId=r.row._id,o.updateTermProp.show=!0}}},"更新"),t("Button",{props:{type:"ghost",size:"small"},style:{marginRight:"5px"},on:{click:function(){o.opID=r.row._id,o.openAeServerForm("edit",r.row)}}},"编辑"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){o.opID=r.row._id,o.$Modal.confirm({title:"谨慎操作",content:"<p>确定删除么？</p>",loading:!0,onOk:function(){o.delServer(o.opID)}})}}},"删除")])}}],aeServerProp:{show:!1,btnLoad:!1,isEdit:!1,propObj:{type:"",ip:"",name:"",area:"",rootUsr:"",rootPwd:"",privateKey:"",installed:!1}},aeServerRule:{name:this.baseJs.textRule,ip:this.baseJs.textRule,rootUsr:this.baseJs.textRule,area:this.baseJs.textRule},aeTermProp:{isEdit:!1,show:!1,btnLoad:!1,sock5List:[],propObj:{serverId:"",robotName:"",platformId:null,platformName:"",sock5On:0,count:1,stype:""}},aeTermRule:{robotName:this.baseJs.textRule,count:this.baseJs.textRule,serverId:this.baseJs.selRule},updateTermProp:{show:!1,btnLoad:!1,serverId:"",stype:"WX"}}},computed:{platformList:function(){return this.$store.state.platformList},robotList:function(){return this.serverList.filter(function(e){return"robot"==e.type})},serverList:function(){return this.$store.state.serverList}},methods:{openAeServerForm:function(e,t){this.$refs.aeServerForm.resetFields(),"edit"==e?(this.aeServerProp.isEdit=!0,this.aeServerProp.propObj.name=t.name,this.aeServerProp.propObj.ip=t.ip,this.aeServerProp.propObj.rootUsr=t.rootUsr,this.aeServerProp.propObj.rootPwd=t.rootPwd,this.aeServerProp.propObj.privateKey=t.privateKey,this.aeServerProp.propObj.type=t.type,this.aeServerProp.propObj.area=t.area):this.aeServerProp.isEdit=!1,this.aeServerProp.show=!0},smAeServer:function(){var e=this;e.$refs.aeServerForm.validate(function(t){if(t){e.aeServerProp.btnLoad=!0;var r="",o=e.baseJs.copyObj(e.aeServerProp.propObj);e.aeServerProp.isEdit?(o._id=e.opID,r="/servers/update"):r="/servers/create",e.axios.post(""+e.baseJs.postUrl+r,o).then(function(t){var r=t.data;r.result?(e.aeServerProp.btnLoad=!1,e.aeServerProp.show=!1,e.$Message.success("操作成功！"),e.$store.dispatch("getServerList")):(e.aeServerProp.btnLoad=!1,e.$Message.error(r.msg))})}else e.$Message.error("请完善表单")})},delServer:function(e){var t=this,r={_id:e};t.axios.post(t.baseJs.postUrl+"/servers/delete",r).then(function(e){var r=e.data;r.result?(t.$Modal.remove(),t.$Message.success("操作成功！"),t.$store.dispatch("getServerList")):(t.$Modal.remove(),t.$Message.error(r.data))})},openAeTerm:function(e,t){this.baseJs.resetForm(this,"aeTermForm"),"edit"==e?(this.aeTermProp.isEdit=!0,this.aeTermProp.propObj.robotName=t.name,this.aeTermProp.propObj.platformId=t.platformId,this.aeTermProp.propObj.sock5On=t.sock5On?1:0):(this.aeTermProp.propObj.serverId=t._id,this.aeTermProp.isEdit=!1),this.aeTermProp.show=!0},smAeTerm:function(){var e=this;e.$refs.aeTermForm.validate(function(t){if(t){e.aeTermProp.btnLoad=!0;var r,o;e.platformList.forEach(function(t){t._id==e.aeTermProp.propObj.platformId&&(e.aeTermProp.propObj.platformName=t.name)}),e.aeTermProp.isEdit?(o="/robots/update",r={_id:e.opID,platformName:e.aeTermProp.propObj.platformName,platformId:e.aeTermProp.propObj.platformId,sock5On:e.aeTermProp.propObj.sock5On}):(o="/remote/robot/setup",r=e.baseJs.copyObj(e.aeTermProp.propObj)),e.axios.post(""+e.baseJs.postUrl+o,r).then(function(t){var r=t.data;r.result?(r.data,e.aeTermProp.btnLoad=!1,e.aeTermProp.show=!1,e.$Message.success("操作成功!")):(e.aeTermProp.btnLoad=!1,e.$Message.error(r.msg))})}else e.$Message.error("请完善表单")})},updateTerm:function(){var e=this;e.updateTermProp.btnLoad=!0;var t={serverId:e.updateTermProp.serverId,stype:e.updateTermProp.stype};e.axios.post(e.baseJs.postUrl+"/remote/robot/update",t).then(function(t){var r=t.data;r.result?(e.updateTermProp.show=!1,e.updateTermProp.btnLoad=!1,e.$Message.success("更新成功")):(e.updateTermProp.btnLoad=!1,e.$Message.error(r.data))})}}},A,!1,function(e){r("P9NF")},"data-v-3b83ed8c",null).exports,gameList:r("Mw9A")({name:"name",data:function(){var e=this;return{opID:null,loading:!1,serverCol:[{title:"ID",key:"_id"},{title:"服务器名称",key:"name"},{title:"地区",key:"area"},{title:"服务器IP",key:"ip"},{title:"操作",key:"op",width:300,align:"center",render:function(t,r){var o=e;return t("div",[t("Button",{props:{type:"ghost",size:"small"},style:{marginRight:"5px"},on:{click:function(){}}},"安装游戏API"),t("Button",{props:{type:"ghost",size:"small"},style:{marginRight:"5px"},on:{click:function(){o.opID=r.row._id,o.openAeServerForm("edit",r.row)}}},"编辑"),t("Button",{props:{type:"error",size:"small"},on:{click:function(){o.opID=r.row._id,o.$Modal.confirm({title:"谨慎操作",content:"<p>确定删除么？</p>",loading:!0,onOk:function(){o.delServer(o.opID)}})}}},"删除")])}}],aeServerProp:{show:!1,btnLoad:!1,isEdit:!1,propObj:{type:"",ip:"",name:"",area:"",rootUsr:"",rootPwd:"",privateKey:"",installed:!1}},aeServerRule:{name:this.baseJs.textRule,ip:this.baseJs.textRule,rootUsr:this.baseJs.textRule,area:this.baseJs.textRule}}},computed:{gameList:function(){return this.serverList.filter(function(e){return"gameapi"==e.type})},serverList:function(){return this.$store.state.serverList}},methods:{openAeServerForm:function(e,t){this.$refs.aeServerForm.resetFields(),"edit"==e?(this.aeServerProp.isEdit=!0,this.aeServerProp.propObj.name=t.name,this.aeServerProp.propObj.ip=t.ip,this.aeServerProp.propObj.rootUsr=t.rootUsr,this.aeServerProp.propObj.rootPwd=t.rootPwd,this.aeServerProp.propObj.privateKey=t.privateKey,this.aeServerProp.propObj.type=t.type,this.aeServerProp.propObj.area=t.area):this.aeServerProp.isEdit=!1,this.aeServerProp.show=!0},smAeServer:function(){var e=this;e.$refs.aeServerForm.validate(function(t){if(t){e.aeServerProp.btnLoad=!0;var r="",o=e.baseJs.copyObj(e.aeServerProp.propObj);e.aeServerProp.isEdit?(o._id=e.opID,r="/servers/update"):r="/servers/create",e.axios.post(""+e.baseJs.postUrl+r,o).then(function(t){var r=t.data;r.result?(e.aeServerProp.btnLoad=!1,e.aeServerProp.show=!1,e.$Message.success("操作成功！"),e.$store.dispatch("getServerList")):(e.aeServerProp.btnLoad=!1,e.$Message.error(r.msg))})}else e.$Message.error("请完善表单")})},delServer:function(e){var t=this,r={_id:e};t.axios.post(t.baseJs.postUrl+"/servers/delete",r).then(function(e){var r=e.data;r.result?(t.$Modal.remove(),t.$Message.success("操作成功！"),t.$store.dispatch("getServerList")):(t.$Modal.remove(),t.$Message.error(r.data))})}}},M,!1,function(e){r("eo1Q")},"data-v-5ddb70f2",null).exports},data:function(){return{tabName:"all"}},created:function(){},methods:{}},F={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-wrap"},[r("div",{staticClass:"main-box"},[r("div",{staticClass:"con-body"},[r("div",{staticClass:"tab"},[r("ul",[r("li",{class:{active:"all"==e.tabName},on:{click:function(t){e.tabName="all"}}},[e._v("全部")]),e._v(" "),r("li",{class:{active:"controller"==e.tabName},on:{click:function(t){e.tabName="controller"}}},[e._v("控制器")]),e._v(" "),r("li",{class:{active:"term"==e.tabName},on:{click:function(t){e.tabName="term"}}},[e._v("终端")]),e._v(" "),r("li",{class:{active:"gameApi"==e.tabName},on:{click:function(t){e.tabName="gameApi"}}},[e._v("游戏API")])])]),e._v(" "),r("div",{staticClass:"table-body"},["all"==e.tabName?r("div",[r("server-list")],1):e._e(),e._v(" "),"controller"==e.tabName?r("div",[r("controller-list")],1):e._e(),e._v(" "),"term"==e.tabName?r("div",[r("term-list")],1):e._e(),e._v(" "),"gameApi"==e.tabName?r("div",[r("game-list")],1):e._e()])])])])},staticRenderFns:[]},R=r("Mw9A")(T,F,!1,function(e){r("XbjR")},"data-v-0775c74d",null).exports,U={data:function(){var e=this;return{opObj:null,opID:null,current:1,searchKey:"",nextPageShow:!1,nextPageLoad:!1,platformId:"",signKey:"",contSel:"1",platformList:[],tableLoad:!1,termCol:[{title:"终端ID",key:"_id"},{title:"终端名",key:"name"},{title:"地区",key:"area"},{title:"服务器IP",key:"controllerIp"},{title:"服务器名",key:"serverName"},{title:"类型",key:"stype"},{title:"SOCK5",key:"sock5On"},{title:"操作",key:"op",width:150,align:"center",render:function(t,r){var o=e;return t("div",[t("Button",{props:{type:"primary",size:"small"},on:{click:function(){o.updateTerm(r.row)}}},"更新")])}}],termList:[],aePlatformProp:{show:!1,btnLoad:!1,isEdit:!1,propObj:{name:"",isGameApi:0,loginUsr:"",loginPwd:"",secretKey:"",webPort:"",serverId:""}},aePlatformRule:{name:this.baseJs.textRule},confTermProp:{load:!1,show:!1,btnLoad:!1,contTypeList:[],contTypeID:null,contList:[],contID:null,termList:[],termIDList:[]},gameApiProp:{show:!1}}},created:function(){this.getPlatformList()},computed:{_termList:function(){var e=this,t=this.termList.filter(function(t){return t.name==e.searchKey||t._id==e.searchKey});return this.searchKey?t:this.termList},serverList:function(){return this.$store.state.serverList},serverFilter:function(){var e=[];return this.serverList.filter(function(t){""!=t.type&&"gameapi"!=t.type||e.push(t)}),e}},methods:{getPlatformList:function(){var e=this;e.axios.get(this.baseJs.getUrl+"/platforms/ls").then(function(t){var r=t.data;if(r.result){var o=r.data||[];e.platformList=o,e.$store.commit("setState",{name:"platformList",data:o})}else e.$Message.error(r.data)})},openAePlatform:function(e,t){this.baseJs.resetForm(this,"aePlatformForm"),"edit"==e?(this.aePlatformProp.isEdit=!0,this.opID=t._id,this.aePlatformProp.propObj.name=t.name,this.aePlatformProp.propObj.isGameApi=t.isGameApi?1:0,this.aePlatformProp.propObj.loginUsr=t.loginUsr,this.aePlatformProp.propObj.loginPwd=t.loginPwd,this.aePlatformProp.propObj.secretKey=t.secretKey,this.aePlatformProp.propObj.webPort=t.webPort,this.aePlatformProp.propObj.serverId=t.serverId):(this.aePlatformProp.isEdit=!1,this.aePlatformProp.propObj.loginUsr="root",this.aePlatformProp.propObj.loginPwd="123456",this.aePlatformProp.propObj.secretKey=O()(this.baseJs.uuid()),this.aePlatformProp.propObj.webPort=this.baseJs.randomWebPort(6535,8e3)+""),this.aePlatformProp.show=!0},smPlatform:function(){var e=this;e.$refs.aePlatformForm.validate(function(t){if(t){e.aePlatformProp.btnLoad=!0;var r="",o=e.baseJs.copyObj(e.aePlatformProp.propObj);e.aePlatformProp.isEdit?(o._id=e.opID,r="/platforms/update"):(r="/platforms/create",o.isGameApi?o.isGameApi=!0:o.isGameApi=!1),e.axios.post(""+e.baseJs.postUrl+r,o).then(function(t){var r=t.data;r.result?(e.opObj&&e.opObj._id==o._id&&(e.opObj.serverId=e.aePlatformProp.propObj.serverId),console.log(e.opObj),e.aePlatformProp.btnLoad=!1,e.aePlatformProp.show=!1,e.$Message.success("操作成功！"),e.getPlatformList()):(e.aePlatformProp.btnLoad=!1,e.$Message.error(r.data))})}else e.$Message.error("请完善表单！")})},delPlatform:function(e){var t=this,r=this;r.$Modal.confirm({title:"谨慎操作",content:"<p>确定删除么？</p>",loading:!0,onOk:function(){var o={_id:e};r.axios.post(t.baseJs.postUrl+"/platforms/delete",o).then(function(t){var o=t.data;o.result?(r.$Modal.remove(),r.getPlatformList(),r.platformId==e&&(r.platformId=null,r.termList=[]),r.$Message.success("删除成功!")):(r.$Modal.remove(),r.$Message.error(o.data))})}})},lookTermList:function(e){this.platformId!=e._id&&(this.opID=e._id,this.opObj=e,this.platformId=e._id,this.signKey=e.signKey,this.tableLoad=!0,this.getTermList(e._id,1))},getTermList:function(e,t){var r=this;1==t&&(r.current=1),r.axios.get(r.baseJs.getUrl+"/robots/findarr/platformId/"+e+"?page="+t).then(function(e){var o=e.data;if(o.result){var a=o.data||[];a.length<30?r.nextPageShow=!1:r.nextPageShow=!0,1==t?r.termList=a:a.forEach(function(e){r.termList.push(e)}),r.tableLoad=!1,r.nextPageLoad=!1}else r.tableLoad=!1,r.nextPageLoad=!1})},updateTerm:function(e){var t=this,r={robotId:e._id,serverId:e.serverId,stype:e.stype};t.$Spin.show(),t.axios.post(t.baseJs.postUrl+"/remote/robot/update",r).then(function(e){var r=e.data;r.result?(t.$Spin.hide(),t.$Message.success("操作成功!")):(t.$Spin.hide(),t.$Message.error(r.data))})},updateKey:function(e){var t=this,r=O()(t.baseJs.uuid()),o={_id:t.platformId,signKey:r};t.$Spin.show(),t.axios.post(t.baseJs.postUrl+"/platforms/update",o).then(function(e){var o=e.data;if(o.result){o.data;t.$Message.success("更新成功！"),t.getPlatformList(),t.signKey=r,t.$Spin.hide()}else t.$Spin.hide(),t.$Message.error(o.data)})},installGameApi:function(){var e=this,t={serverId:this.opObj.serverId,platformId:this.opObj._id};e.axios.post(e.baseJs.postUrl+"/remote/gameapi/setup",t).then(function(t){var r=t.data;r.result?(console.log(r),e.$Message.success(r.data)):e.$Message.error(r.data)})},nextPage:function(){this.current+=1,this.nextPageLoad=!0,this.getTermList(this.platformId,this.current)}}},D={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-wrap"},[r("Modal",{attrs:{title:e.aePlatformProp.isEdit?"编辑平台":"添加平台",width:350,"mask-closable":!1},model:{value:e.aePlatformProp.show,callback:function(t){e.$set(e.aePlatformProp,"show",t)},expression:"aePlatformProp.show"}},[r("Form",{ref:"aePlatformForm",attrs:{model:e.aePlatformProp.propObj,rules:e.aePlatformRule,"label-width":100}},[r("FormItem",{attrs:{prop:"name",label:"平 台 名 称"}},[r("Input",{attrs:{placeholder:"请输入平台名"},model:{value:e.aePlatformProp.propObj.name,callback:function(t){e.$set(e.aePlatformProp.propObj,"name",t)},expression:"aePlatformProp.propObj.name"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"isGameApi",label:"开启游戏API"}},[r("RadioGroup",{model:{value:e.aePlatformProp.propObj.isGameApi,callback:function(t){e.$set(e.aePlatformProp.propObj,"isGameApi",t)},expression:"aePlatformProp.propObj.isGameApi"}},[r("Radio",{attrs:{label:1}},[e._v("是")]),e._v(" "),r("Radio",{attrs:{label:0}},[e._v("否")])],1)],1),e._v(" "),e.aePlatformProp.propObj.isGameApi?r("div",[r("FormItem",{attrs:{prop:"loginUsr",label:"登录账号"}},[r("Input",{attrs:{placeholder:"登录账号"},model:{value:e.aePlatformProp.propObj.loginUsr,callback:function(t){e.$set(e.aePlatformProp.propObj,"loginUsr",t)},expression:"aePlatformProp.propObj.loginUsr"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"loginPwd",label:"登录密码"}},[r("Input",{attrs:{placeholder:"登录账号"},model:{value:e.aePlatformProp.propObj.loginPwd,callback:function(t){e.$set(e.aePlatformProp.propObj,"loginPwd",t)},expression:"aePlatformProp.propObj.loginPwd"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"secretKey",label:"登录密钥"}},[r("Input",{attrs:{placeholder:"登录账号"},model:{value:e.aePlatformProp.propObj.secretKey,callback:function(t){e.$set(e.aePlatformProp.propObj,"secretKey",t)},expression:"aePlatformProp.propObj.secretKey"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"webPort",label:"端口号"}},[r("Input",{attrs:{placeholder:"登录账号"},model:{value:e.aePlatformProp.propObj.webPort,callback:function(t){e.$set(e.aePlatformProp.propObj,"webPort",t)},expression:"aePlatformProp.propObj.webPort"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"webPort",label:"选择服务器"}},[r("Select",{model:{value:e.aePlatformProp.propObj.serverId,callback:function(t){e.$set(e.aePlatformProp.propObj,"serverId",t)},expression:"aePlatformProp.propObj.serverId"}},e._l(e.serverFilter,function(t){return r("Option",{key:t._id,attrs:{value:t._id}},[e._v(e._s(t.name))])}))],1)],1):e._e()],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary",loading:e.aePlatformProp.btnLoad},on:{click:e.smPlatform}},[e._v("确定")])],1)],1),e._v(" "),r("Modal",{attrs:{title:"游戏API",width:350},model:{value:e.gameApiProp.show,callback:function(t){e.$set(e.gameApiProp,"show",t)},expression:"gameApiProp.show"}},[r("div",{staticStyle:{"line-height":"30px"}},[r("p",[e._v("登录账号："+e._s(e.opObj?e.opObj.loginUsr:""))]),e._v(" "),r("p",[e._v("登录密码："+e._s(e.opObj?e.opObj.loginPwd:""))]),e._v(" "),r("p",[e._v("登录密钥："+e._s(e.opObj?e.opObj.secretKey:""))]),e._v(" "),r("p",[e._v("登录端口："+e._s(e.opObj?e.opObj.webPort:""))]),e._v(" "),r("p",[e._v("服务器ID："+e._s(e.opObj?e.opObj.serverId:""))])]),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"})]),e._v(" "),r("div",{staticClass:"main-box"},[r("div",{staticClass:"con-body"},[r("div",{staticClass:"left-sidebar"},[r("ul",e._l(e.platformList,function(t){return r("li",{class:{active:e.platformId==t._id},on:{click:function(r){e.lookTermList(t)}}},[r("Row",[r("Col",{staticClass:"omit",attrs:{span:"18"}},[e._v(e._s(t.name))]),e._v(" "),r("Col",{staticClass:"tc platformOpBtn",attrs:{span:"3"},nativeOn:{click:function(r){r.stopPropagation(),e.openAePlatform("edit",t)}}},[r("Icon",{attrs:{type:"compose",title:"编辑",color:"#ff9900"}})],1),e._v(" "),r("Col",{staticClass:"tc platformOpBtn",attrs:{span:"3"},nativeOn:{click:function(r){r.stopPropagation(),e.delPlatform(t._id)}}},[r("Icon",{attrs:{type:"trash-a",title:"删除",color:"#ff9900"}})],1)],1)],1)})),e._v(" "),r("div",{staticClass:"addPlatform"},[r("Button",{attrs:{type:"primary"},on:{click:e.openAePlatform}},[e._v("添加平台")])],1)]),e._v(" "),r("div",{staticStyle:{"margin-left":"220px",padding:"0 20px",position:"relative",height:"auto"}},[r("div",{staticStyle:{padding:"20px 0","font-size":"18px","font-weight":"bold",color:"#666"}},[e.platformId?r("Row",[r("Col",{attrs:{span:"16"}},[r("p",{staticStyle:{"font-size":"16px","margin-top":"5px"}},[e._v("平台ID："+e._s(e.opObj._id))]),e._v(" "),r("p",{staticStyle:{"font-size":"16px","margin-top":"5px"}},[e._v("密钥: "+e._s(e.signKey)),r("Button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",size:"small",icon:"refresh"},on:{click:e.updateKey}},[e._v("更新密钥")])],1)]),e._v(" "),r("Col",{staticClass:"tr",attrs:{span:"8"}},[e.opObj.isGameApi?r("Button",{attrs:{type:"primary"},on:{click:e.installGameApi}},[e._v("安装游戏API")]):e._e(),e._v(" "),e.opObj.isGameApi?r("Button",{attrs:{type:"ghost"},on:{click:function(t){e.gameApiProp.show=!0}}},[e._v("查看游戏API")]):e._e()],1)],1):e._e()],1),e._v(" "),r("div",{staticStyle:{position:"absolute",top:"100px",right:"20px",bottom:"40px",left:"20px",overflow:"auto"}},[r("Table",{attrs:{columns:e.termCol,data:e._termList,loading:e.tableLoad}}),e._v(" "),e.nextPageShow?r("div",{staticClass:"tc mt-20 mb-20"},[r("Button",{attrs:{type:"primary",loading:e.nextPageLoad},on:{click:e.nextPage}},[e._v("加载更多")])],1):e._e()],1)])])])],1)},staticRenderFns:[]},E=r("Mw9A")(U,D,!1,function(e){r("P9K4")},"data-v-9655833c",null).exports,J={data:function(){var e=this;return{opID:null,total:0,current:1,nextPageShow:!1,nextPageLoad:!1,exportProp:{show:!1,termNumList:""},searchKey:"",termCol:[{title:"终端ID",key:"_id"},{title:"终端名",key:"name"},{title:"平台",key:"platformName"},{title:"地区",key:"area"},{title:"服务器IP",key:"serverIp"},{title:"服务器名",key:"serverName"},{title:"类型",key:"stype"},{title:"sock5状态",key:"sock5On",render:function(e,t){return e("div",{style:{color:1==t.row.sock5On?"#19be6b":"#ff9900"}},1==t.row.sock5On?"已开启":"已关闭")}},{title:"操作",key:"op",width:240,align:"center",render:function(t,r){var o=e;return t("div",[t("Button",{props:{type:"ghost",size:"small"},style:{marginRight:"5px"},on:{click:function(){o.loginDetProp.show=!0,o.loginDet(r.row._id)}}},"登录详情"),t("Button",{props:{type:"ghost",size:"small"},style:{marginRight:"5px"},on:{click:function(){o.updateTerm(r.row)}}},"更新"),t("Button",{props:{type:"ghost",size:"small"},style:{marginRight:"5px"},on:{click:function(){o.opID=r.row._id,o.openAeTerm("edit",r.row)}}},"编辑"),t("Button",{props:{type:"error",size:"small"},style:{marginRight:"5px"},on:{click:function(){o.$Modal.confirm({title:"谨慎操作",content:"<p>确定删除么？</p>",loading:!0,onOk:function(){o.delTerm(r.row)}})}}},"删除")])}}],termList:[],aeTermProp:{isEdit:!1,show:!1,btnLoad:!1,sock5List:[],propObj:{serverId:"",robotName:"",platformId:null,platformName:"",sock5On:0,count:1,stype:""}},aeTermRule:{robotName:this.baseJs.textRule,count:this.baseJs.textRule,serverId:this.baseJs.selRule},loginDetProp:{show:!1,loading:!1,propObj:{}}}},created:function(){this.getTermList(1)},computed:{_termList:function(){var e=this,t=this.termList.filter(function(t){return t.name==e.searchKey||t._id==e.searchKey});return this.searchKey?t:this.termList},platformList:function(){return this.$store.state.platformList},serverList:function(){var e=[];return this.$store.state.serverList.forEach(function(t){"robot"==t.type&&e.push(t)}),e}},methods:{getTermList:function(e){var t=this;1==e&&(t.current=1),t.axios.get(t.baseJs.getUrl+"/robots/ls?page="+e).then(function(r){var o=r.data;if(o.result){var a=o.data||[];a.length<30?t.nextPageShow=!1:t.nextPageShow=!0,1==e?t.termList=a:a.forEach(function(e){t.termList.push(e)}),t.nextPageLoad=!1}else t.nextPageLoad=!1})},openAeTerm:function(e,t){this.baseJs.resetForm(this,"aeTermForm"),"edit"==e?(this.aeTermProp.isEdit=!0,this.aeTermProp.propObj.robotName=t.name,this.aeTermProp.propObj.platformId=t.platformId,this.aeTermProp.propObj.sock5On=t.sock5On?1:0):this.aeTermProp.isEdit=!1,this.aeTermProp.show=!0},smAeTerm:function(){var e=this;e.$refs.aeTermForm.validate(function(t){if(t){e.aeTermProp.btnLoad=!0;var r,o;e.platformList.forEach(function(t){t._id==e.aeTermProp.propObj.platformId&&(e.aeTermProp.propObj.platformName=t.name)}),e.aeTermProp.isEdit?(o="/robots/update",r={_id:e.opID,name:e.aeTermProp.propObj.robotName,platformName:e.aeTermProp.propObj.platformName,platformId:e.aeTermProp.propObj.platformId,sock5On:e.aeTermProp.propObj.sock5On}):(o="/remote/robot/setup",r=e.baseJs.copyObj(e.aeTermProp.propObj)),e.axios.post(""+e.baseJs.postUrl+o,r).then(function(t){var r=t.data;if(r.result){r.data;e.getTermList(1),e.aeTermProp.btnLoad=!1,e.aeTermProp.show=!1,e.$Message.success("操作成功!")}else e.aeTermProp.btnLoad=!1,e.$Message.error(r.msg)})}else e.$Message.error("请完善表单")})},delTerm:function(e){var t=this,r={robotId:e._id,serverId:e.serverId,stype:e.stype};t.axios.post(t.baseJs.postUrl+"/remote/robot/delete",r).then(function(e){var r=e.data;r.result?(t.$Message.success("操作成功!"),t.getTermList(1),t.$Modal.remove()):(t.$Modal.remove(),t.$Message.error(r.data))})},updateTerm:function(e){var t=this,r={robotId:e._id,serverId:e.serverId,stype:e.stype};t.$Spin.show(),t.axios.post(t.baseJs.postUrl+"/remote/robot/update",r).then(function(e){var r=e.data;r.result?(t.$Spin.hide(),t.$Message.success("操作成功!")):(t.$Spin.hide(),t.$Message.error(r.data))})},loginDet:function(e){var t=this;t.axios.get(t.baseJs.postUrl+"/online/robots/"+e+"/detail",{}).then(function(e){var r=e.data;if(r.result){var o=JSON.parse(r.data.data),a=JSON.parse(r.data.exdata);t.loginDetProp.propObj=o,t.loginDetProp.loading=!1,t.loginDetProp.propObj.logsUrl=a.logsUrl}else t.loginDetProp.loading=!1,t.$Message.error(r.msg)})},nextPage:function(){this.current+=1,this.nextPageLoad=!0,this.getTermList(this.current)},_export:function(){var e="";this.exportProp.termNumList="",this._termList.forEach(function(t){e+=t._id+"\n"}),this.exportProp.termNumList=e,this.exportProp.show=!0}}},N={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-wrap"},[r("div",{staticClass:"main-box"},[r("div",{staticClass:"con-body"},[r("div",{staticStyle:{width:"300px"}},[r("Input",{attrs:{placeholder:"请输入终端名、终端ID..."},model:{value:e.searchKey,callback:function(t){e.searchKey=t},expression:"searchKey"}})],1),e._v(" "),r("div",{staticClass:"table-body"},[r("Table",{attrs:{columns:e.termCol,data:e._termList}}),e._v(" "),e.nextPageShow?r("div",{staticClass:"tc mt-20 mb-20"},[r("Button",{attrs:{type:"primary",loading:e.nextPageLoad},on:{click:e.nextPage}},[e._v("加载更多")])],1):e._e()],1),e._v(" "),r("div",{staticClass:"table-footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.openAeTerm}},[e._v("添加终端")]),e._v(" "),r("Tooltip",{attrs:{placement:"top"}},[r("Button",{attrs:{type:"primary"},on:{click:e._export}},[e._v("导出")]),e._v(" "),r("div",{attrs:{slot:"content"},slot:"content"},[r("p",[e._v("导出只针对当前页面数据，如果要导出全部,")]),e._v(" "),r("p",[e._v("请点击列表加载更多，然后再导出")])])],1)],1)])]),e._v(" "),r("Modal",{attrs:{title:e.aeTermProp.isEdit?"编辑终端":"添加终端",width:400,"mask-closable":!1},model:{value:e.aeTermProp.show,callback:function(t){e.$set(e.aeTermProp,"show",t)},expression:"aeTermProp.show"}},[r("Form",{ref:"aeTermForm",attrs:{model:e.aeTermProp.propObj,rules:e.aeTermRule,"label-width":100}},[r("FormItem",{attrs:{prop:"robotName",label:"终端名"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeTermProp.propObj.robotName,callback:function(t){e.$set(e.aeTermProp.propObj,"robotName",t)},expression:"aeTermProp.propObj.robotName"}})],1),e._v(" "),e.aeTermProp.isEdit?e._e():r("div",[r("FormItem",{attrs:{prop:"count",label:"安装个数"}},[r("InputNumber",{staticStyle:{width:"100%"},attrs:{min:1,max:30},model:{value:e.aeTermProp.propObj.count,callback:function(t){e.$set(e.aeTermProp.propObj,"count",t)},expression:"aeTermProp.propObj.count"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"serverId",label:"服务器"}},[r("Select",{model:{value:e.aeTermProp.propObj.serverId,callback:function(t){e.$set(e.aeTermProp.propObj,"serverId",t)},expression:"aeTermProp.propObj.serverId"}},e._l(e.serverList,function(t,o){return r("Option",{key:o,attrs:{value:t._id}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("FormItem",{attrs:{prop:"stype",label:"终端类型"}},[r("RadioGroup",{model:{value:e.aeTermProp.propObj.stype,callback:function(t){e.$set(e.aeTermProp.propObj,"stype",t)},expression:"aeTermProp.propObj.stype"}},[r("Radio",{attrs:{label:"WX"}},[e._v("微信")]),e._v(" "),r("Radio",{attrs:{label:"QQ"}},[e._v("QQ")])],1)],1)],1),e._v(" "),r("FormItem",{attrs:{prop:"platformId",label:"平台选择"}},[r("Select",{model:{value:e.aeTermProp.propObj.platformId,callback:function(t){e.$set(e.aeTermProp.propObj,"platformId",t)},expression:"aeTermProp.propObj.platformId"}},e._l(e.platformList,function(t,o){return r("Option",{key:o,attrs:{value:t._id}},[e._v(e._s(t.name))])}))],1),e._v(" "),r("FormItem",{attrs:{prop:"sock5On",label:"SOCK5"}},[r("RadioGroup",{model:{value:e.aeTermProp.propObj.sock5On,callback:function(t){e.$set(e.aeTermProp.propObj,"sock5On",t)},expression:"aeTermProp.propObj.sock5On"}},[r("Radio",{attrs:{label:1}},[e._v("启用")]),e._v(" "),r("Radio",{attrs:{label:0}},[e._v("关闭")])],1)],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary",loading:e.aeTermProp.btnLoad},on:{click:e.smAeTerm}},[e._v("确定")])],1)],1),e._v(" "),r("Modal",{staticClass:"loginDet",attrs:{title:"终端详情",width:300},model:{value:e.loginDetProp.show,callback:function(t){e.$set(e.loginDetProp,"show",t)},expression:"loginDetProp.show"}},[e.loginDetProp.loading?r("Spin",{attrs:{fix:""}}):e._e(),e._v(" "),r("div",{staticStyle:{"line-height":"30px"}},[r("img",{attrs:{src:e.loginDetProp.propObj.HeadimgUrl||"-/-",alt:""}}),e._v(" "),r("div",[e._v("微信名："+e._s(e.loginDetProp.propObj.Alias||"-/-"))]),e._v(" "),r("div",[e._v("微信昵称："+e._s(e.loginDetProp.propObj.Nickname||"-/-"))]),e._v(" "),r("div",[e._v("微信ID："+e._s(e.loginDetProp.propObj.Wxid||"-/-"))]),e._v(" "),r("div",[e._v("终端ID："+e._s(e.loginDetProp.propObj.robotId||"-/-"))]),e._v(" "),r("div",[e._v("性别："+e._s(e.loginDetProp.propObj.Sex||"-/-"))]),e._v(" "),r("div",[e._v("地区："+e._s(e.loginDetProp.propObj.City||"-/-"))]),e._v(" "),r("div",[e._v("logsUrl: "),r("a",{attrs:{href:e.loginDetProp.propObj.logsUrl||"-/-",target:"_blank"}},[e._v(e._s(e.loginDetProp.propObj.logsUrl||"-/-"))])])]),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"})],1),e._v(" "),r("Modal",{staticClass:"loginDet",attrs:{title:"导出",width:300},model:{value:e.exportProp.show,callback:function(t){e.$set(e.exportProp,"show",t)},expression:"exportProp.show"}},[r("Input",{attrs:{type:"textarea",readonly:"",rows:10},model:{value:e.exportProp.termNumList,callback:function(t){e.$set(e.exportProp,"termNumList",t)},expression:"exportProp.termNumList"}}),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"})],1)],1)},staticRenderFns:[]},K=r("Mw9A")(J,N,!1,function(e){r("gk3l")},"data-v-3cb39e6c",null).exports,B={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-wrap"},[r("div",{staticClass:"main-box"},[r("div",{staticClass:"con-body"},[r("div",{staticClass:"top-back"},[r("router-link",{attrs:{to:{name:"controllerManage"}}},[r("Button",{attrs:{type:"primary",icon:"chevron-left"}},[e._v("返回")])],1)],1),e._v(" "),r("div",{staticClass:"tabs-header"},[r("div",{staticClass:"tabs-tab",class:{"tabs-tab-active":e.$route.path.indexOf("termList")>-1},on:{click:function(t){e.tabSel("termList")}}},[e._v("终端列表")]),e._v(" "),r("div",{staticClass:"tabs-tab",class:{"tabs-tab-active":e.$route.path.indexOf("apiTest")>-1},on:{click:function(t){e.tabSel("apiTest")}}},[e._v("接口测试")]),e._v(" "),r("div",{staticClass:"tabs-tab",class:{"tabs-tab-active":e.$route.path.indexOf("log")>-1},on:{click:function(t){e.tabSel("log")}}},[e._v("日志")])]),e._v(" "),r("div",{staticClass:"table-body"},[r("div",{staticClass:"tabs-content"},[r("router-view")],1)])])])])},staticRenderFns:[]},G=(r("Mw9A")({data:function(){return{tabName:"termList"}},created:function(){},methods:{tabSel:function(e){this.tabName=e,this.$router.push("/"+e)}}},B,!1,function(e){r("POl0")},"data-v-29a09a1e",null).exports,{name:"name",data:function(){return{ws:new WebSocket("ws://"+sessionStorage.controlIP+":7200/test/ws/0120508cd011000120808031086a09ab50212040807100012"),load:!1,robot:"",robotList:[],code:null,codeList:[{label:"机器人列表-(102)-Code_Robots",value:102},{label:"微信状态-(103)-Code_WxStatus",value:103},{label:"重置-(104)-Code_Reset",value:104},{label:"二维码登录-(105)-Code_QrcodeLogin",value:105},{label:"用户密码登录-(108)-Code_UsrPwdLogin",value:108},{label:"二次登录-(110)-Code_SecondAuthLogin",value:110},{label:"用户列表-(112)-Code_UsernameLists",value:112},{label:"通讯录-(114)-Code_Contacts",value:114},{label:"发送文本消息-(115)-Code_SendMsg",value:115},{label:"发送图片消息-(116)-Code_SendMsgImage",value:116},{label:"发送名片消息-(117)-Code_SendCardMsg",value:117},{label:"发送语音消息-(118)-Code_SendVoiceMsg",value:118},{label:"群发文本消息-(119)-Code_MessSendMsg",value:119},{label:"群发语音消息-(120)-Code_MessSendVoice",value:120},{label:"群发图片消息-(121)-Code_MessSendImage",value:121},{label:"发送APP消息-(122)-Code_SendAppMsg",value:122},{label:"下载图片-(123)-Code_DownloadImage",value:123},{label:"下载语音-(124)-Code_DownloadVoice",value:124},{label:"-(127)-Code_OptionLog",value:127},{label:"-(128)-Code_SearchContact",value:128},{label:"-(129)-Code_GetUserByWxid",value:129},{label:"-(130)-Code_UserOptionLog",value:130},{label:"更改密码-(131)-Code_ChangePassword",value:131},{label:"取消用户-(132)-Code_CancelUser",value:132},{label:"更新头像-(133)-Code_UploadHeadImg",value:133},{label:"设置身份信息-(133)-Code_SetPersonInfo",value:134},{label:"设置被加方式-(135)-Code_SetAddFrom",value:135},{label:"设置用户名-(136)-Code_SetWeixinUsername",value:136},{label:"绑定手机-(137)-Code_BindMobile",value:137},{label:"绑定邮箱-(138)-Code_BindEail",value:138},{label:"创建群-(139)-Code_CreateChatRoom",value:139},{label:"更改群名-(140)-Code_ChangeChatRoomName",value:140},{label:"邀请群聊-(141)-Code_InviteChatRoom",value:141},{label:"退出群-(142)-Code_ExitChatRoom",value:142},{label:"踢群用户-(143)-Code_DelChatRoomUser",value:143},{label:"获取群二维码-(144)-Code_GetRoomQrcode",value:144},{label:"获取群信息-(145)-Code_GetRoomDetail",value:145},{label:"添加群成员-(146)-Code_AddChatRoomMember",value:146},{label:"关闭群验证-(147)-Code_ChatRoomVerifyOnOff",value:147},{label:"允许加入群-(148)-Code_ApproveAddChatroomMember",value:148},{label:"设置群公告-(149)-Code_SetChatRoomAnnouncement",value:149},{label:"附近的人-(150)-Code_NearPeople",value:150},{label:"摇一摇-(151)-Code_Yao1Yao",value:151},{label:"-(152)-Code_SnsPost",value:152},{label:"-(153)-Code_SnsTimeLine",value:153},{label:"-(154)-Code_SnsObjectOp",value:154},{label:"-(155)-Code_SnsUserPage",value:155},{label:"-(156)-Code_SnsUploadImg",value:156},{label:"-(157)-Code_SnsComment",value:157},{label:"-(158)-Code_GetA8Key",value:158},{label:"(控制器)版本号-(201)-Controller_Version",value:201},{label:"(控制器)安装终端-(202)-Controller_SetupRobot",value:202},{label:"(控制器)更新终端-(203)-Controller_UpdateRobot",value:203},{label:"(控制器)删除终端-(204)-Controller_DeleteRobot",value:204}],dataCon:"",responseCon:""}},created:function(){var e=this;e.ws.onopen=function(){},e.ws.onmessage=function(t){var r=JSON.parse(t.data);if(102==r.code){var o=[];r.data.forEach(function(e,t){o.push({value:e.exdata.robotId,label:e.exdata.robotName})}),e.robotList=o}r.code==e.code&&(e.load=!1,e.responseCon=r)}},methods:{submit:function(){this.load=!0,this.responseCon="";var e=g()({code:this.code,robotId:this.robot,data:this.dataCon?JSON.parse(this.dataCon):""});this.ws.send(e)}},beforeDestroy:function(){this.ws.close()}}),z={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"wrap"},[r("div",{staticClass:"col-con"},[r("div",{staticClass:"request"},[r("h2",[e._v("Request")]),e._v(" "),r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("code ：")]),e._v(" "),r("Select",{model:{value:e.code,callback:function(t){e.code=t},expression:"code"}},e._l(e.codeList,function(t){return r("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("robot：")]),e._v(" "),r("Select",{model:{value:e.robot,callback:function(t){e.robot=t},expression:"robot"}},e._l(e.robotList,function(t){return r("Option",{key:t.value,attrs:{value:t.value}},[e._v(e._s(t.label))])}))],1),e._v(" "),r("div",{staticClass:"item"},[r("span",{staticClass:"label"},[e._v("data ：")]),e._v(" "),r("i-input",{attrs:{type:"textarea",rows:7,placeholder:'{"key" : value }'},model:{value:e.dataCon,callback:function(t){e.dataCon=t},expression:"dataCon"}})],1),e._v(" "),r("div",{staticClass:"item",staticStyle:{"text-align":"right"}},[r("i-button",{attrs:{type:"primary"},on:{click:e.submit}},[e._v("提交")])],1)]),e._v(" "),r("div",{staticClass:"response"},[r("h2",[e._v("Response")]),e._v(" "),e.load?r("span",[e._v("Loading...")]):e._e(),e._v(" "),r("div",{staticClass:"response-body"},[e._v(e._s(e.responseCon))])])])])},staticRenderFns:[]},Q=(r("Mw9A")(G,z,!1,function(e){r("EwCv")},"data-v-1983261b",null).exports,{name:"name",data:function(){return{ws:new WebSocket("ws://"+sessionStorage.controlIP+":7200/test/ws/0120508cd011000120808031086a09ab50212040807100012"),logType:"all",logCon:""}},created:function(){var e=this;e.ws.onopen=function(){},e.ws.onmessage=function(t){var r=JSON.parse(t.data),o="时间：<b>"+e.baseJs.formatTime(1e3*r.timestamp)+"</b><br />code：【"+r.code+"】<br />data："+g()(r).replace(/\n/g,"<br />")+"<br />=================================<br />";switch(e.logType){case"all":e.logCon+=o;break;case"controller":r.code>=200&&(e.logCon+=o);break;case"termAll":r.code<200&&(e.logCon+=o)}e.$nextTick(function(){e.$refs.logCon.scrollTop=e.$refs.logCon.scrollHeight})}},methods:{selectType:function(e){this.logType=e}},watch:{logType:function(){this.logCon=""}},beforeDestroy:function(){this.ws.close()}}),X={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticStyle:{height:"100%"}},[t("div",{staticClass:"col-con",staticStyle:{padding:"0",border:"none",height:"100%",position:"relative"}},[t("Menu",{attrs:{mode:"horizontal",theme:"dark","active-name":"all"},on:{"on-select":this.selectType}},[t("MenuItem",{attrs:{name:"all"}},[this._v("全部日志")]),this._v(" "),t("MenuItem",{attrs:{name:"controller"}},[this._v("控制器日志")]),this._v(" "),t("MenuItem",{attrs:{name:"termAll"}},[this._v("终端日志")])],1),this._v(" "),t("div",{ref:"logCon",staticClass:"log-box",domProps:{innerHTML:this._s(this.logCon)}})],1)])},staticRenderFns:[]},q=(r("Mw9A")(Q,X,!1,function(e){r("6E0D")},"data-v-5a727885",null).exports,{name:"name",data:function(){var e=this;return{opID:null,total:null,current:1,sockCol:[{title:"地区",key:"area"},{title:"IP:Port",key:"sock5Addr"},{title:"用户名",key:"sock5Usr"},{title:"密码",key:"sock5Pwd"},{title:"绑定终端ID",key:"_id"},{title:"操作",key:"op",align:"center",render:function(t,r){var o=e;return t("div",[t("Button",{props:{type:"ghost",size:"small",icon:"edit"},style:{marginRight:"5px"},on:{click:function(){o.opID=r.row._id,o.openAeSock("edit",r.row)}}},"编辑"),t("Button",{props:{type:"error",size:"small",icon:"trash-a"},on:{click:function(){o.opID=r.row._id,o.$Modal.confirm({title:"谨慎操作",content:"<p>确定删除么？</p>",loading:!0,onOk:function(){o.delSock(o.opID)}})}}},"删除")])}}],sockList:[],aeSockRule:{area:this.baseJs.textRule,sock5Addr:this.baseJs.textRule},aeSockProp:{show:!1,isEdit:!1,btnLoad:!1,propObj:{area:"",sock5Addr:"",sock5Usr:"",sock5Pwd:""}}}},created:function(){this.getSockList(this)},methods:{getSockList:function(){var e=this;e.axios.get(e.baseJs.getUrl+"/sock5s/ls").then(function(t){var r=t.data;if(r.result){var o=r.data;e.sockList=o||[]}else e.$Message.error(r.data)})},openAeSock:function(e,t){this.$refs.aeSockForm.resetFields(),"edit"==e?(this.aeSockProp.isEdit=!0,this.aeSockProp.propObj.area=t.area,this.aeSockProp.propObj.sock5Addr=t.sock5Addr,this.aeSockProp.propObj.sock5Usr=t.sock5Usr,this.aeSockProp.propObj.sock5Pwd=t.sock5Pwd,console.log(t)):this.aeSockProp.isEdit=!1,this.aeSockProp.show=!0},smAeSock:function(){var e=this;e.$refs.aeSockForm.validate(function(t){if(t){e.aeSockProp.btnLoad=!0;var r="",o=e.baseJs.copyObj(e.aeSockProp.propObj);e.aeSockProp.isEdit?(o._id=e.opID,r="/sock5s/update"):r="/sock5s/create",e.axios.post(""+e.baseJs.postUrl+r,o).then(function(t){var r=t.data;r.result?(e.aeSockProp.btnLoad=!1,e.aeSockProp.show=!1,e.$Message.success("操作成功！"),e.getSockList()):(e.aeSockProp.btnLoad=!1,e.$Message.error(r.data))})}else e.$Message.error("请完善表单")})},delSock:function(e){var t=this,r={_id:e};t.axios.post(t.baseJs.postUrl+"/sock5s/delete",r).then(function(e){var r=e.data;r.result?(t.$Modal.remove(),t.$Message.success("操作成功！"),t.getSockList(t,t.current)):(t.$Modal.remove(),t.$Message.error(r.msg))})},uploadSuccess:function(e){e.result?(this.$Message.success(e.msg),this.getSockList(this,this.current)):this.$Message.error(e.msg)},uploadError:function(e){this.$Message.error("上传失败，请重试!")}}}),W={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"main-wrap"},[r("div",{staticClass:"main-box"},[r("div",{staticClass:"con-body"},[r("div",{staticClass:"table-body"},[r("Table",{attrs:{columns:e.sockCol,data:e.sockList}})],1),e._v(" "),r("div",{staticClass:"table-footer"},[r("Row",[r("Col",{attrs:{span:"10"}},[r("Button",{attrs:{type:"primary"},on:{click:e.openAeSock}},[e._v("创建sock")]),e._v(" "),r("a",{attrs:{href:this.baseJs.postUrl+"/sock5/upload"}},[r("Button",{attrs:{type:"primary"}},[e._v("下载模板")])],1),e._v(" "),r("Upload",{staticStyle:{width:"75px",display:"inline-block"},attrs:{"show-upload-list":!1,action:this.baseJs.postUrl+"/sock5/inport","on-success":e.uploadSuccess,"on-error":e.uploadError}},[r("Button",{attrs:{type:"primary",icon:"ios-cloud-upload-outline"}},[e._v("导入")])],1)],1),e._v(" "),r("Col",{staticStyle:{"text-align":"right"},attrs:{span:"14"}})],1)],1)])]),e._v(" "),r("Modal",{attrs:{title:e.aeSockProp.isEdit?"编辑SOCK":"创建SOCK",width:400,"mask-closable":!1},model:{value:e.aeSockProp.show,callback:function(t){e.$set(e.aeSockProp,"show",t)},expression:"aeSockProp.show"}},[r("Form",{ref:"aeSockForm",attrs:{model:e.aeSockProp.propObj,rules:e.aeSockRule,"label-width":100}},[r("FormItem",{attrs:{prop:"area",label:"地区"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeSockProp.propObj.area,callback:function(t){e.$set(e.aeSockProp.propObj,"area",t)},expression:"aeSockProp.propObj.area"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"sock5Addr",label:"IP地址"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeSockProp.propObj.sock5Addr,callback:function(t){e.$set(e.aeSockProp.propObj,"sock5Addr",t)},expression:"aeSockProp.propObj.sock5Addr"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"sock5Usr",label:"用户名"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeSockProp.propObj.sock5Usr,callback:function(t){e.$set(e.aeSockProp.propObj,"sock5Usr",t)},expression:"aeSockProp.propObj.sock5Usr"}})],1),e._v(" "),r("FormItem",{attrs:{prop:"sock5Pwd",label:"密码"}},[r("Input",{attrs:{type:"text",placeholder:"请输入内容..."},model:{value:e.aeSockProp.propObj.sock5Pwd,callback:function(t){e.$set(e.aeSockProp.propObj,"sock5Pwd",t)},expression:"aeSockProp.propObj.sock5Pwd"}})],1)],1),e._v(" "),r("div",{attrs:{slot:"footer"},slot:"footer"},[r("Button",{attrs:{type:"primary"},on:{click:e.smAeSock}},[e._v("确定")])],1)],1)],1)},staticRenderFns:[]},H=[{path:"/",redirect:"/login"},{path:"/login",name:"login",component:b},{path:"/home",component:h,children:[{path:"/",redirect:"/controllerTypeManage"},{path:"/controllerManage",name:"controllerManage",component:x},{path:"/controllerTypeManage",name:"controllerTypeManage",component:j},{path:"/serverManage",name:"serverManage",component:R},{path:"/serverList",name:"serverList",component:$},{path:"/platformManage",name:"platformManage",component:E},{path:"/termManage",name:"termManage",component:K},{path:"/sockManage",name:"sockManage",component:r("Mw9A")(q,W,!1,function(e){r("bBiT")},"data-v-cf3f8302",null).exports}]}],V={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"layout-menu-left",attrs:{width:"160px"}},[t("div",{staticClass:"layout-logo-left"},[this._v("平台控制管理")]),this._v(" "),t("Menu",{ref:"sideMenu",attrs:{"active-name":this.$route.path,width:"180px",theme:"dark"},on:{"on-select":this.selMenu}},[t("MenuItem",{attrs:{name:"/controllerTypeManage"}},[t("Icon",{attrs:{type:"stats-bars"}}),this._v("地区管理")],1),this._v(" "),t("MenuItem",{attrs:{name:"/serverManage"}},[t("Icon",{attrs:{type:"stats-bars"}}),this._v("服务器管理")],1),this._v(" "),t("MenuItem",{attrs:{name:"/platformManage"}},[t("Icon",{attrs:{type:"stats-bars"}}),this._v("平台管理")],1),this._v(" "),t("MenuItem",{attrs:{name:"/termManage"}},[t("Icon",{attrs:{type:"stats-bars"}}),this._v("终端管理")],1),this._v(" "),t("MenuItem",{attrs:{name:"/sockManage"}},[t("Icon",{attrs:{type:"stats-bars"}}),this._v("SOCK5管理")],1)],1)],1)},staticRenderFns:[]},Y=r("Mw9A")({name:"sidebar",data:function(){return{activeName:"/controllerManage"}},created:function(){},methods:{selMenu:function(e){this.$router.push(e)}}},V,!1,function(e){r("5gSR")},"data-v-60052a9e",null).exports,Z=r("iDJq"),ee=r.n(Z),te={name:"topbar",data:function(){return{photoUrl:ee.a}},methods:{}},re={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"top-bar"},[t("div",{staticClass:"user"})])}]},oe=r("Mw9A")(te,re,!1,function(e){r("5JIi")},"data-v-04b86e46",null).exports,ae=r("hRKE"),se=r.n(ae),ne={masterIP:"http://120.79.20.53",postUrl:"/master",getUrl:"/master",formatTime:function(e){var t=new Date(e),r={"M+":t.getMonth()+1,"d+":t.getDate(),"h+":t.getHours(),"m+":t.getMinutes(),"s+":t.getSeconds(),"q+":Math.floor((t.getMonth()+3)/3),"S+":t.getMilliseconds()},o="yyyy-MM-dd hh:mm:ss";/(y+)/i.test(o)&&(o=o.replace(RegExp.$1,(t.getFullYear()+"").substr(4-RegExp.$1.length)));for(var a in r)new RegExp("("+a+")").test(o)&&(o=o.replace(RegExp.$1,1==RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length)));return o},isEmptyStr:function(e){return e.replace(/\s/g,"").length<1},resetForm:function(e,t){e.$refs[t].resetFields()},uuid:function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})},randomWebPort:function(e,t){var r=t-e;return Math.floor(Math.random()*r+e)},vBlank:function(e,t,r){t.replace(/\s/g,"").length<1?r(new Error("不能为空！")):r()},textRule:[{required:!0,pattern:/\S/g,message:"不能为空!",trigger:"blur"}],selRule:[{required:!0,message:"不能为空!",trigger:"change"}],copyObj:function(e){if("object"!=(void 0===e?"undefined":se()(e)))return e;var t={};for(var r in e)t[r]=this.copyObj(e[r]);return t}},pe=(r("briU"),r("rVsN")),ie=r.n(pe),le=r("9rMa");o.default.use(le.a);var ce=function(e){return new ie.a(function(t){p.a.get(""+ne.getUrl+e).then(function(e){var r=e.data;if(r.result){var o=r.data||[];t(o)}})})},de={getSockList:function(e){ce("/sock5s/ls").then(function(t){e.commit("setState",{name:"sockList",data:t})})},getPlatFormList:function(e){ce("/platforms/ls").then(function(t){e.commit("setState",{name:"platformList",data:t})})},getversionList:function(e){ce("/versions/ls").then(function(t){e.commit("setState",{name:"versionList",data:t})})},getServerList:function(e){ce("/servers/ls").then(function(t){e.commit("setState",{name:"serverList",data:t})})},getareaList:function(e){ce("/areas/ls").then(function(t){e.commit("setState",{name:"areaList",data:t})})}},ve=new le.a.Store({state:{adminName:0,sockList:[],platformList:[],versionList:[],serverList:[],areaList:[]},actions:de,mutations:{setState:function(e,t){return e[t.name]=t.data}}});o.default.prototype.baseJs=ne,o.default.component(Y.name,Y),o.default.component(oe.name,oe),o.default.use(c.a),o.default.use(s.a,p.a),o.default.use(l.a);var me=new c.a({routes:H});me.beforeEach(function(e,t,r){var o=sessionStorage.getItem("accessToken");"false"!=o&&o||"login"==e.name?r():r({path:"/login",query:{redirect:e.fullPath}})}),new o.default({el:"#app",store:ve,router:me,render:function(e){return e(v)}})},P1I3:function(e,t){},P9K4:function(e,t){},P9NF:function(e,t){},POl0:function(e,t){},XbjR:function(e,t){},bBiT:function(e,t){},eo1Q:function(e,t){},fgKX:function(e,t){},gUCe:function(e,t){},gk3l:function(e,t){},iDJq:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADgAAAA4CAMAAACfWMssAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAB4UExURT+vN////zyvNm3DaDyvNj6wOTywNlXUVUa4ODyvNkWyQP/CCEGyO/v+++757rLgsNTu0obOgn7KeqjcpvX79Fa6UV69WUy2RmfBY8fpxuX15HTGb//IIv/XXdzx25PTkL/lvZ7Ym//fe//10//77f/ssf/RQv/mmMYzwyMAAAAKdFJOU0D////5MeIBEqRqD3IUAAACAklEQVRIx+WX2ZaDIAyGBdppq0RFrfvSfd7/DQfFtqiAy+38N55j/RqSn0i0Dq321grtO8Q6HI6nHbVXiO5OxxY8/mCakhVKKf45cvCEiYuWqnIc59cl+MTBHV3OoZKDD+TS3cHa43Q5d+dcxa8p5eXEZDl44+CTX4ltrQNfjlOiDeCDB7xtAZ8cfFXV0wRG/sW7elkNgxTLtqrlQwu6YUGxUBJcYGTkU7dUt7GxrMQD2cibLkdviLU6+18jS1CDwLBC1Ot//nXu6qoCwWpd+xQ7NxRggHUSMSukBq9aDtM2z8ddDeZUD+JYqu0YDLBJoRasjRxOQAc2g+dkO0UKmQ48D0x3vwtnwiSmAfPBunIEPUnqfimJBszGxYeijXxB4fsuqEFPAkU6UNghoMvnbq4Gw/E24SR/Afpfc/25iHxj5qz/+zrBcxE/OTIUNRSfu8dcudSRGnz7X4CXCEP4GySWndVUFYTlcfZ+OHaHXVboNkDXwzSV9nWg6CwFmJn3Ko10IMRGsNG3lTGk7epBY0NK7TgFI/1iGTKBQ79lETCD0o4eKIjQDJgqjQhHp8QUVAYsajQHwjTFhPnTQ3ACdi1JY+b52ZUVJGhCX3nCjsEoOQehD/NH8wSMFp7pq6eO/wauGgI/G5MPgevGzr6H2rFz3aArODHobh6tNw/zGz8f/gDtOytI+eEFtwAAAABJRU5ErkJggg=="},oO6p:function(e,t){},vfEN:function(e,t){},vryz:function(e,t){},wBDP:function(e,t){}},["NHnr"]);
//# sourceMappingURL=app.9e1a657487dc49be9236.js.map